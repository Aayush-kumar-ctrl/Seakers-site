<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Old Skool - Gentswear</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Open+Sans&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"></script>

<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Open Sans', sans-serif; background: #f8f9fa; color: #333; }
  header { background: #111; color: white; padding: 20px 50px; display: flex; justify-content: space-between; align-items: center; }
  .logo { font-size: 24px; font-family: 'Playfair Display', serif; }
  .nav-links { list-style: none; display: flex; gap: 20px; }
  .nav-links li { cursor: pointer; }
  .nav-links button { background: #ff6b00; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; }

  .collection { padding: 50px; text-align: center; }
  .section-title { font-size: 30px; margin-bottom: 30px; font-family: 'Playfair Display', serif; }

  /* Product grid */
  .products { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
    gap: 25px;
    justify-items: center;
  }
  .product-card { 
    background: white; 
    border-radius: 10px; 
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    width: 250px;
    transition: transform 0.2s ease;
    cursor: pointer;
  }
  .product-card:hover { transform: scale(1.05); }
  .product-card img { width: 100%; height: 250px; object-fit: cover; border-top-left-radius: 10px; border-top-right-radius: 10px; }
  .product-card h3 { margin: 10px 0; font-size: 18px; }
  .price { color: #ff6b00; font-weight: bold; }

  /* Product detail view */
  #product-detail {
    display: none;
    padding: 50px;
    max-width: 900px;
    margin: 0 auto;
    background: white;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }
  #product-detail img {
    width: 100%;
    max-height: 400px;
    object-fit: cover;
    border-radius: 10px;
  }
  #product-detail h2 { font-family: 'Playfair Display', serif; margin-top: 20px; }
  #product-detail p { margin: 10px 0; }
  #product-detail button {
    background: #ff6b00;
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 15px;
  }
  #back-btn {
    margin-top: 30px;
    display: inline-block;
    background: #333;
    color: white;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
  }

<<<<<<< HEAD
  /* Cart */
  #cart-container { margin: 50px auto; max-width: 800px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
</style>
</head>
<body>
=======
    <!-- ✅ Clerk frontend SDK -->
    <script
      async
      crossorigin="anonymous"
      src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"
    ></script>
  </head>
>>>>>>> b7d38ac36daa28f52a88ac436a79f63b345f51f4

<header>
  <div class="logo">Old Skool</div>
  <ul class="nav-links">
    <li><a href="#" style="color:white; text-decoration:none;">Home</a></li>
    <li><a href="#collection" style="color:white; text-decoration:none;">Collection</a></li>
    <li><button id="sign-in">Sign In</button></li>
    <li><button id="sign-out" style="display:none;">Sign Out</button></li>
  </ul>
</header>

<section class="collection" id="collection">
  <h2 class="section-title">Featured Collection</h2>
  <div class="products" id="products-container"></div>
</section>

<div id="product-detail">
  <img id="detail-img" src="" alt="">
  <h2 id="detail-name"></h2>
  <p id="detail-price"></p>
  <p id="detail-description"></p>
  <div id="detail-reviews"></div>
  <button id="add-to-cart-btn">Add to Cart</button>
  <div id="back-btn">← Back to Products</div>
</div>

<h2 style="text-align:center;">Your Cart</h2>
<div id="cart-container"></div>

<script>
  // ---------------- Clerk Setup ----------------
  const clerk = new Clerk({ frontendApi: "YOUR_FRONTEND_API_KEY" });
  const auth = clerk.auth;

  function updateAuthButtons() {
    if (auth.user) {
      document.getElementById("sign-in").style.display = "none";
      document.getElementById("sign-out").style.display = "inline-block";
      loadCart();
    } else {
      document.getElementById("sign-in").style.display = "inline-block";
      document.getElementById("sign-out").style.display = "none";
      document.getElementById("cart-container").innerHTML = "Please sign in to view your cart.";
    }
  }
  document.getElementById("sign-in").addEventListener("click", () => clerk.signIn());
  document.getElementById("sign-out").addEventListener("click", () => clerk.signOut());
  auth.on("change", updateAuthButtons);
  updateAuthButtons();

  // ---------------- Products ----------------
  let products = [];
  let selectedProduct = null;
  async function loadProducts() {
    const res = await fetch("http://localhost:5000/api/products");
    products = await res.json();
    const container = document.getElementById("products-container");
    container.innerHTML = "";
    products.forEach(product => {
      const card = document.createElement("div");
      card.className = "product-card";
      card.innerHTML = `
        <img src="${product.image}" alt="${product.name}" />
        <h3>${product.name}</h3>
        <p class="price">₹${product.price}</p>
      `;
      card.addEventListener("click", () => showProductDetail(product));
      container.appendChild(card);
    });
  }

  // ---------------- Product Detail ----------------
  const detail = document.getElementById("product-detail");
  function showProductDetail(product) {
    selectedProduct = product;
    document.getElementById("collection").style.display = "none";
    detail.style.display = "block";
    document.getElementById("detail-img").src = product.image;
    document.getElementById("detail-name").textContent = product.name;
    document.getElementById("detail-price").textContent = `Price: ₹${product.price}`;
    document.getElementById("detail-description").textContent = product.description || "No description available.";
    document.getElementById("detail-reviews").innerHTML = `
      <h3>Customer Reviews</h3>
      <p>⭐️⭐️⭐️⭐️☆ 4.3/5 (Based on 48 reviews)</p>
      <p>"Great fit and quality!" - Rajesh</p>
      <p>"Exactly like the picture, very comfortable." - Aman</p>
    `;
  }
  document.getElementById("back-btn").addEventListener("click", () => {
    detail.style.display = "none";
    document.getElementById("collection").style.display = "block";
  });

  document.getElementById("add-to-cart-btn").addEventListener("click", async () => {
    if (!auth.user) return alert("Please sign in first!");
    await fetch("http://localhost:5000/api/cart", {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      credentials: "include",
      body: JSON.stringify({
        productId: selectedProduct._id,
        name: selectedProduct.name,
        price: selectedProduct.price,
        quantity: 1
      })
    });
    alert("Added to cart!");
    loadCart();
  });

  // ---------------- Cart ----------------
  async function loadCart() {
    if (!auth.user) return;
    const res = await fetch("http://localhost:5000/api/cart", { credentials: "include" });
    const cart = await res.json();
    const container = document.getElementById("cart-container");
    if (!cart.items || cart.items.length === 0) {
      container.innerHTML = "<p>Cart is empty.</p>";
      return;
    }
    container.innerHTML = cart.items.map(item => `
      <p>${item.name} - ₹${item.price} × ${item.quantity}</p>
    `).join("");
  }

  // ---------------- Init ----------------
  loadProducts();
</script>

</body>
</html>
